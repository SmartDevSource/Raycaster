export const map = {
    tiles: [
        ['w01', 'w01', 'w01', 'w01', 'w01', 'w01', 'w01', 'w01', 'w01', 'w01', 'w01', 'w01', 'w01', 'w01', 'w01'],
        ['w01', '___', '___', '___', '___', '___', '___', 'w01', '___', '___', '___', '___', '___', '___', 'w01'],
        ['w01', '___', '___', 'w01', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', 'w01'],
        ['w01', '___', '___', 's01', '___', '___', 'w01', 'w01', '___', '___', '___', 's01', '___', '___', 'w01'],
        ['w01', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', 'w01'],
        ['w01', '___', '___', '___', '___', '___', '___', '___', '___', '___', 's01', '___', '___', '___', 'w01'],
        ['w01', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', 'w01'],
        ['w01', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', 'w01'],
        ['w01', '___', '___', 'w01', 'w01', 'w01', '___', '___', 's01', '___', '___', '___', '___', '___', 'w01'],
        ['w01', '___', '___', 's01', '___', 'w01', '___', '___', 's01', '___', '___', '___', '___', '___', 'w01'],
        ['w01', '___', '___', 'w01', 'w01', 'w01', '___', '___', 's01', '___', '___', '___', '___', '___', 'w01'],
        ['w01', '___', '___', '___', '___', '___', '___', '___', 's01', '___', '___', '___', '___', '___', 'w01'],
        ['w01', '___', '___', '___', '___', '___', '___', '___', 's01', '___', '___', '___', '___', '___', 'w01'],
        ['w01', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', 'w01'],
        ['w01', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', 'w01'],
        ['w01', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', 'w01'],
        ['w01', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', 'w01'],
        ['w01', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', 'w01'],
        ['w01', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', 'w01'],
        ['w01', '___', '___', '___', '___', '___', '___', '___', '___', 's01', 's01', '___', '___', '___', 'w01'],
        ['w01', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', 'w01'],
        ['w01', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', 'w01'],
        ['w01', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', 'w01'],
        ['w01', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', 'w01'],
        ['w01', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', 'w01'],
        ['w01', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', 'w01'],
        ['w01', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', 'w01'],
        ['w01', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', 'w01'],
        ['w01', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', 'w01'],
        ['w01', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', '___', 'w01'],
        ['w01', 'w01', 'w01', 'w01', 'w01', 'w01', 'w01', 'w01', 'w01', 'w01', 'w01', 'w01', 'w01', 'w01', 'w01'],
    ],
    grid_offset: 32,
    skybox: 'sky',
    floor_gradient: {
        close_dark: {r: 25, g: 18, b: 10},
        close_light: {r: 60, g: 40, b: 20},
        far_dark: 'black'
    }
}

export const getMapSprites = () => {
    const sprites_map = []
    for (let y = 0 ; y < map.tiles.length ; y++){
        for (let x = 0 ; x < map.tiles[y].length ; x++){
            const cell_content = map.tiles[y][x]
            if (cell_content.startsWith('s')){
                const cell_x = (x * map.grid_offset) + map.grid_offset / 2
                const cell_y = (y * map.grid_offset) + map.grid_offset / 2
                sprites_map.push({
                    name: cell_content,
                    position: {x: cell_x, y: cell_y},
                    distance: 0,
                    dx: 0,
                    dy: 0,
                    angle: 0
                })
            }
        }
    }
    return sprites_map
}

export const getMapTiles = () => {
    const map_tiles = Array.from({length: map.tiles.length}, () =>
        Array(map.tiles[0].length).fill('___')
    )
    for (let y = 0 ; y < map.tiles.length ; y++){
        for (let x = 0 ; x < map.tiles[y].length ; x++){
            const cell_content = map.tiles[y][x]
            if (cell_content.startsWith('w')){
                map_tiles[y][x] = cell_content
            } else {
                map_tiles[y][x] = '___'
            }
        }
    }
    return map_tiles
}